\section{Window detection}
\label{chap:windowDetection}
\subsection{Introduction}
% bruggetje maken, van 3d model een vb applicatie windowdetection
\subsubsection{Related work}

\subsection{Method I: Connected corner approach} 
\subsection{Method II: Histogram based approach} 
\subsubsection{Situation and assumptions}
In this method we assume the wall containing the windows to be rectified.
To be more precise we assume the windows to have orthogonal sides.
Furthermore we assume the windows to be alligned.

The main idea is that we extract the alignment of the windows based on
histogramming Houghlines on projected coordinates.

input 
output


\paragraph{Alignment lines}
%explain pipe line
%(color transform)
%edge extraction
%houghline extraction
histogram based approach, the idea
We introduce the concept alignment line. We define this as a horizontal or
vertical line that alignes multiple windows. In image %TODO the green dotted
green and we represent the alignment lines as two groups, horizontal (red) and
vertical (green) alignment lines. The intersection of both groups give a good
indication of the corners of the windows.

The extraction of the alignment lines consist of several steps.

First we extract the coordinates of the endpoints of the Hough transformed line
segments and store them in two groups, horizontal and vertical (Figure
\ref{fig:houghlineEndpoints}). 

We project the coordinates to the orthogonal direction of its group. This means
that the horizontal Houghlines are projected in the Y direction and the vertical
Houghlines are projected in the X direction, leaving the data in two groups of 1
dimensional coordinates.

We calculate two histograms H(orizontal) and V(ertical), containing respectively
$w$ and $h$ bins where $w x h$ is the dimensions of the image.  The graphs of
the histograms are presented in Figure %TODO

The peaks are located at the positions where an increased number of Houghlines
start or end.  These are the interested positions as they give us the alignment
lines of the windows. 

The number of peaks is fare more then the number of alignment lines which makes
it hard to extract the alignment lines. A common solution would to decrease the
number of bins of the histograms. A disadvantage of this method is that it also
decreases the accuracy. Therefor we use the maximum resolution and smooth the
function using a using a moving average filter with a span of %TODOthe width of 
The result, red lines Figure %TODO
, is a smooth function which contains the right number of peaks. Also the peaks
are located at right positions. But how do we extract the exact position of this
peaks?

Before we find the peak positions we extract the peak areas by thresholding the
function, see the black dotted line in Figure %TODO
% the threshold is set to 20% of max?

We create a binary function P that returns 1 for positions that are contained in
a peak, i.e. are above the threshold, and 0 otherwise.
% OPZOEKEn hoe folky dit doet
%P(x)  { 1, H(x)>t
%	  { 0, H(x)<=t

We detect the peak areas by searching for the positions where the function
passes the threshold line. A peak starts on position $s$ if {P(s-1),P(s)}={0,1}
a peak ends on e if {P(e-1),P(e)}={1,0}. I.e. if P = 0011000011100, then two
peaks are present, there are two peak areas, the first covers positions {3,4}, 
the second covers {9,10,11}. 

Having classified the peak areas, the next step is to extract the peaks.  Each
peak area has only one peak and, since we used an average smoothing filter, each
peak area has a concave shape. Consiquently we can find easily extract the peaks
by locating the max of each peak area.  Having extracted the exact peak
locations we have drawn the window alignment lines, dotted red and yellow lines
in Figure % TODO

The image is now devided in several rectangular areas. The next challenge is to 
classify the rectangles as a window or non-window area.



Images:
edge image
example image of start end coordinates Houghlines



\subsection{Method III: Feature detection approach}
	harris corner

\subsection{Fusing the methods}

\subsection{Results}
\subsection{Discussion}  % (What do my results mean to me and why)
\subsection{Conclusion and Future work}




% title: Graph Theory and Mean Shift Segmentation Based Classiﬁcation of Building Facades
% 
% Most of the previous algorithms are computationally expensive and not suitable for real time applications. Because
% of the requirements of real-time applications robust and fast
% classiﬁcation of facades is still an open research topic
% 
% 
% Image-based Procedural Modeling of Facades
% 
% 
% 
% refs:
% (canny edge detector:)
% 
% Canny, J., 1986. A computational approach to edge detection.
% IEEE Transactions on pattern analysis and machine intelli-
% gence pp. 679–698.
% 
